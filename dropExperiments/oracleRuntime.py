#!/usr/bin/env python
import subprocess

datasets = ['50words', 'Adiac', 'CBF', 'ChlorineConcentration', 'CinC',
            'Cricket', 'DistalPhalanxOutlineAgeGroup',
            'DistalPhalanxOutlineCorrect', 'DistalPhalanxTW', 'ECG5000',
            'ECGFiveDays', 'ElectricDevices', 'FaceAll', 'FacesUCR', 'FordA',
            'FordB', 'HandOutlines', 'InlineSkate', 'InsectWingbeatSound',
            'ItalyPowerDemand', 'LargeKitchenAppliances', 'MALLAT',
            'MedicalImages', 'MiddlePhalanxOutlineAgeGroup',
            'MiddlePhalanxOutlineCorrect', 'MiddlePhalanxTW', 'MoteStrain',
            'NonInvasiveFatalECG', 'PhalangesOutlinesCorrect', 'Phoneme',
            'ProximalPhalanxOutlineAgeGroup', 'ProximalPhalanxOutlineCorrect',
            'ProximalPhalanxTW', 'RefrigerationDevices', 'ScreenType',
            'ShapesAll', 'SmallKitchenAppliances', 'SonyAIBORobotSurface',
            'SonyAIBORobotSurfaceII', 'StarLightCurves', 'Strawberry',
            'SwedishLeaf', 'Symbols', 'Two', 'TwoLeadECG',
            'UWaveGestureLibraryAll', 'WordsSynonyms', 'synthetic',
            'uWaveGestureLibrary', 'wafer', 'yoga','MNIST_all']

#single trial
propns = [0.2325470682427779, 0.1347578407684151, 0.80349328484632399, 0.028740313187400716, 0.13231567448187909, 0.67597524730342351, 0.25253528775449452, 0.22790614184350597, 0.30250514514687549, 0.072850863635009561, 0.08554134357899236, 0.082444733625884364, 0.22117814995577237, 0.19190488418130261, 0.21364522850875473, 0.17211013023163968, 0.23566873106069752, 0.093618999929528851, 0.098919664301229254, 0.13308800389832631, 0.93027573701315669, 0.10429289186407778, 0.1570246936385549, 0.22237589882240433, 0.17992918939670799, 0.24818666407507167, 0.48863304127172452, 0.082158137057781994, 0.065780673218003724, 0.88784690243862707, 0.20828963120709876, 0.12891548272941808, 0.28962719200598019, 0.94263430014933258, 0.83127425027271684, 0.16097752466260629, 0.96814944844729811, 0.43097711326583932, 0.26646942929371448, 0.023726126091423945, 0.069341843168595402, 0.34539128077052222, 0.037879774048122185, 0.1960723117436059, 0.040640158648456944, 0.080688707311120905, 0.21074764927596976, 0.76443448986592466, 0.067100223125198144, 0.080655483448807519, 0.025620648015144895,0.041126693810802965]

#10 trial
propns = [0.23708533603026655, 0.12057953939637218, 0.69871437006488757, 0.03814922449337687, 0.1524455957446943, 0.68644617201911162, 0.28826293222873228, 0.28513254911781949, 0.29304496699759175, 0.031816491685133827, 0.087340422021172925, 0.08947611202585605, 0.20699674752848676, 0.20176123539314189, 0.22968070389473971, 0.17005636122609674, 0.13746248118955265, 0.097758208381282033, 0.12389182557440477, 0.12626449363997422, 0.89786561035466883, 0.1164588836490856, 0.17547272626058111, 0.22382229290065561, 0.14913679557755402, 0.23560541185243164, 0.50486811686500244, 0.072379118053284258, 0.069500504995176612, 0.89822458150699735, 0.19288935683430122, 0.13712698825241765, 0.27846442430367768, 0.93542644824758181, 0.89578558598862534, 0.12132850069211376, 0.95805345357629856, 0.39452564347874552, 0.25032690247088968, 0.019990754889090488, 0.10830483911273384, 0.33047502706770043, 0.048796815787151351, 0.20131861201820961, 0.058536815447487532, 0.093921325406631562, 0.21219150879482923, 0.72870327766805931, 0.055660156514971269, 0.047999559567525704, 0.022196115051701916,0.03186323913476713]

lbr = 0.98
algos = ['SVD', 'TROPP', 'FAST']
numTrials = 50

proc = "java -Xms6g ${JAVA_OPTS} -cp 'assembly/target/*:core/target/classes:frontend/target/classes:contrib/target/classes' macrobase.analysis.stats.optimizer.experiments.OracleBinSearchExperiments %s %f %s %d"
comp = "mvn compile -Dmaven.test.skip=true"
package = "mvn package -DskipTests"
subprocess.call(comp, shell=True)
subprocess.call(package, shell=True)

for algo in algos:
    for dataset,propn in datasets:
        subprocess.call(proc % (dataset, lbr, algo, numTrials), shell=True)


